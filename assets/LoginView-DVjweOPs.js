import{_ as z,u as H,r as n,o as I,a as W,b as F,c as a,d as $,e as t,f as b,t as _,n as j,g as G,w as c,v as p,h as r}from"./index-BwJJocST.js";const J="/digipay-dashboard/assets/digipaylogo-BtNC5vBW.svg",K={class:"login-page"},O={class:"login-form-panel"},Q={class:"login-form-container"},X={class:"form-header"},Y={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Z={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ee={class:"form-group"},te={class:"input-wrapper"},se=["disabled"],oe={class:"form-group"},ae={class:"input-wrapper"},re=["disabled"],ie=["disabled"],ne={key:0,class:"loading-spinner"},le={key:1},de={key:2,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ue={class:"form-group"},ve={class:"input-wrapper disabled"},ce=["value"],pe={class:"form-group"},he={class:"input-wrapper"},we=["disabled"],ge={class:"form-group"},me={class:"input-wrapper"},fe=["disabled"],ye=["disabled"],ke={key:0,class:"loading-spinner"},be={key:1},_e={key:2,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},xe={__name:"LoginView",setup(Pe){const h=F(),w=W(),{login:T,setPassword:E,handleInviteToken:q,isAuthenticated:D,user:A}=H(),u=n(!1),g=n(""),m=n(""),d=n(""),f=n(""),x=n(""),s=n(!1),v=n(""),y=n("error");function l(i,e="error"){v.value=i,y.value=e}function P(){v.value=""}async function L(i){i.preventDefault(),P(),s.value=!0;const e=await T(g.value,m.value);if(e.success){const o=w.query.redirect||"/reports";h.push(o)}else l(e.error||"Invalid email or password");s.value=!1}async function N(i){if(i.preventDefault(),P(),d.value!==f.value){l("Passwords do not match");return}if(d.value.length<6){l("Password must be at least 6 characters");return}s.value=!0;const e=await E(d.value);e.success?(l("Password set successfully! Redirecting...","success"),setTimeout(()=>{const o=w.query.redirect||"/reports";h.push(o)},1500)):l(e.error||"Error setting password. Please try again."),s.value=!1}async function R(){var M;const i=window.location.hash.substring(1),e=new URLSearchParams(i),o=new URLSearchParams(window.location.search),C=e.get("error")||o.get("error"),U=e.get("error_description")||o.get("error_description");if(C)return l(U||C),!1;const B=e.get("access_token"),V=e.get("refresh_token"),k=e.get("type");if(B&&V){const S=await q(B,V);if(S.success){if(k==="invite"||k==="recovery"||k==="signup")return u.value=!0,x.value=((M=A.value)==null?void 0:M.email)||"",window.history.replaceState({},document.title,window.location.pathname),!0}else l(S.error||"Error processing invite link. Please try again or contact support.")}return!1}return I(async()=>{if(!await R()&&D.value){const e=w.query.redirect||"/reports";h.push(e)}}),(i,e)=>(r(),a("div",K,[e[18]||(e[18]=$('<div class="login-brand" data-v-0713d36a><div class="brand-content" data-v-0713d36a><img src="'+J+'" alt="DigiPay" class="brand-logo" data-v-0713d36a><h1 data-v-0713d36a>DigiPay Dashboard</h1><p data-v-0713d36a>Manage your payments, track transactions, and grow your business with powerful analytics.</p><div class="brand-features" data-v-0713d36a><div class="feature" data-v-0713d36a><div class="feature-icon" data-v-0713d36a><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0713d36a><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-0713d36a></path></svg></div><span data-v-0713d36a>Secure &amp; Encrypted</span></div><div class="feature" data-v-0713d36a><div class="feature-icon" data-v-0713d36a><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0713d36a><path d="M22 12h-4l-3 9L9 3l-3 9H2" data-v-0713d36a></path></svg></div><span data-v-0713d36a>Real-time Analytics</span></div><div class="feature" data-v-0713d36a><div class="feature-icon" data-v-0713d36a><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0713d36a><rect x="2" y="4" width="20" height="16" rx="2" data-v-0713d36a></rect><path d="M12 10v4" data-v-0713d36a></path><path d="M2 10h20" data-v-0713d36a></path></svg></div><span data-v-0713d36a>Multi-processor Support</span></div></div></div><div class="brand-footer" data-v-0713d36a><span data-v-0713d36a>Trusted by merchants worldwide</span></div></div>',1)),t("div",O,[t("div",Q,[t("div",X,[t("h2",null,_(u.value?"Create Password":"Welcome back"),1),t("p",null,_(u.value?"Set up your account to get started":"Enter your credentials to continue"),1)]),v.value?(r(),a("div",{key:0,class:j(["alert",`alert-${y.value}`])},[y.value==="error"?(r(),a("svg",Y,[...e[4]||(e[4]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),t("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)])])):(r(),a("svg",Z,[...e[5]||(e[5]=[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),t("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])),G(" "+_(v.value),1)],2)):b("",!0),u.value?(r(),a("form",{key:2,onSubmit:N,class:"login-form"},[t("div",ue,[e[12]||(e[12]=t("label",{for:"userEmail"},"Email",-1)),t("div",ve,[e[11]||(e[11]=t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),t("polyline",{points:"22,6 12,13 2,6"})],-1)),t("input",{type:"email",id:"userEmail",value:x.value,disabled:""},null,8,ce)])]),t("div",pe,[e[14]||(e[14]=t("label",{for:"newPassword"},"New Password",-1)),t("div",he,[e[13]||(e[13]=t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),t("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)),c(t("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),required:"",placeholder:"Min. 6 characters",autocomplete:"new-password",minlength:"6",disabled:s.value},null,8,we),[[p,d.value]])])]),t("div",ge,[e[16]||(e[16]=t("label",{for:"confirmPassword"},"Confirm Password",-1)),t("div",me,[e[15]||(e[15]=t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),t("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)),c(t("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),required:"",placeholder:"Confirm your password",autocomplete:"new-password",minlength:"6",disabled:s.value},null,8,fe),[[p,f.value]])])]),t("button",{type:"submit",class:"submit-btn",disabled:s.value},[s.value?(r(),a("span",ke)):(r(),a("span",be,"Create Account")),s.value?b("",!0):(r(),a("svg",_e,[...e[17]||(e[17]=[t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1),t("polyline",{points:"12 5 19 12 12 19"},null,-1)])]))],8,ye)],32)):(r(),a("form",{key:1,onSubmit:L,class:"login-form"},[t("div",ee,[e[7]||(e[7]=t("label",{for:"loginEmail"},"Email",-1)),t("div",te,[e[6]||(e[6]=t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),t("polyline",{points:"22,6 12,13 2,6"})],-1)),c(t("input",{type:"email",id:"loginEmail","onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),required:"",placeholder:"name@company.com",autocomplete:"email",disabled:s.value},null,8,se),[[p,g.value]])])]),t("div",oe,[e[9]||(e[9]=t("label",{for:"loginPassword"},"Password",-1)),t("div",ae,[e[8]||(e[8]=t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),t("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)),c(t("input",{type:"password",id:"loginPassword","onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),required:"",placeholder:"Enter your password",autocomplete:"current-password",disabled:s.value},null,8,re),[[p,m.value]])])]),t("button",{type:"submit",class:"submit-btn",disabled:s.value},[s.value?(r(),a("span",ne)):(r(),a("span",le,"Sign in")),s.value?b("",!0):(r(),a("svg",de,[...e[10]||(e[10]=[t("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1),t("polyline",{points:"12 5 19 12 12 19"},null,-1)])]))],8,ie)],32))])])]))}},Be=z(xe,[["__scopeId","data-v-0713d36a"]]);export{Be as default};
